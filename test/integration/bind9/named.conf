// BIND9 configuration for external-dns-docker integration tests.
// DO NOT use in production â€” this config is intentionally permissive.

options {
    directory "/var/cache/bind";
    listen-on port 53 { any; };
    listen-on-v6 { none; };
    allow-query { any; };
    allow-transfer { any; };
    recursion no;
    // Disable DNSSEC validation so the test zone can use a simple static serial.
    dnssec-validation no;
};

// TSIG key used by external-dns-docker for RFC2136 authenticated updates.
// Secret is base64("test-key-for-external-dns-docker").
key "external-dns-test" {
    algorithm hmac-sha256;
    secret "dGVzdC1rZXktZm9yLWV4dGVybmFsLWRucy1kb2NrZXI=";
};

zone "example.com" IN {
    type primary;
    // Relative to options.directory (/var/cache/bind).
    file "db.example.com";
    // Only RFC2136 updates signed with the TSIG key are accepted.
    allow-update { key "external-dns-test"; };
    allow-transfer { any; };
};
